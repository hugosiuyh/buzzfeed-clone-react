{"ast":null,"code":"var _jsxFileName = \"/Users/hugo/code/buzzfeed-clone-react/src/App.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, createRef } from 'react';\nimport Title from './components/Title';\nimport QuestionsBlock from './components/QuestionsBlock';\nimport AnswerBlock from \"./components/AnswerBlock\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  var _quiz$content2;\n  const [quiz, setQuiz] = useState(null);\n  const [chosenAnswerItems, setChosenAnswerItems] = useState([]); // useState([null]*4)\n  const [unansweredQuestionIds, setUnansweredQuestionIds] = useState(null);\n  const [showAnswer, setShowAnswer] = useState(false);\n  const refs = unansweredQuestionIds === null || unansweredQuestionIds === void 0 ? void 0 : unansweredQuestionIds.reduce((acc, id) => {\n    acc[id] = /*#__PURE__*/createRef();\n    return acc;\n  }, {});\n  const answerRef = /*#__PURE__*/createRef();\n  console.log(refs);\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/quiz');\n      const json = await response.json();\n      setQuiz(json);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    var _quiz$content;\n    const unansweredIds = quiz === null || quiz === void 0 ? void 0 : (_quiz$content = quiz.content) === null || _quiz$content === void 0 ? void 0 : _quiz$content.map(_ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    });\n    setUnansweredQuestionIds(unansweredIds);\n  }, [quiz]);\n  useEffect(() => {\n    if (chosenAnswerItems.length > 0) {\n      //chosenAnswerItems.length - chosenAnswerItems.filter(Number).length\n      if (showAnswer) {\n        // scroll to answer block\n        answerRef.current.scrollIntoView({\n          behavior: 'smooth'\n        });\n      }\n      if (unansweredQuestionIds.length <= 0 && chosenAnswerItems.length >= 1) {\n        // \n        setShowAnswer(true);\n      } else {\n        // scroll to highest unansweredQuestionId\n        const highestId = Math.min(...unansweredQuestionIds);\n        refs[highestId].current.scrollIntoView({\n          behavior: 'smooth'\n        });\n      }\n    }\n  }, [unansweredQuestionIds, showAnswer, chosenAnswerItems, answerRef, refs]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      title: quiz === null || quiz === void 0 ? void 0 : quiz.title,\n      subtitle: quiz === null || quiz === void 0 ? void 0 : quiz.subtitle,\n      banner: quiz === null || quiz === void 0 ? void 0 : quiz.bannerimg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), refs && (quiz === null || quiz === void 0 ? void 0 : (_quiz$content2 = quiz.content) === null || _quiz$content2 === void 0 ? void 0 : _quiz$content2.map(contentItem => /*#__PURE__*/_jsxDEV(QuestionsBlock, {\n      quizItem: contentItem,\n      setChosenAnswerItems: setChosenAnswerItems,\n      chosenAnswerItems: chosenAnswerItems,\n      unansweredQuestionIds: unansweredQuestionIds,\n      setUnansweredQuestionIds: setUnansweredQuestionIds,\n      ref: refs[contentItem.id]\n    }, contentItem.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }, this))), showAnswer && /*#__PURE__*/_jsxDEV(AnswerBlock, {\n      answerOptions: quiz === null || quiz === void 0 ? void 0 : quiz.answers,\n      chosenAnswers: chosenAnswerItems,\n      ref: answerRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n_s(App, \"GkTkauZs0MLksLWrst0OKeeP634=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","createRef","Title","QuestionsBlock","AnswerBlock","jsxDEV","_jsxDEV","App","_s","_quiz$content2","quiz","setQuiz","chosenAnswerItems","setChosenAnswerItems","unansweredQuestionIds","setUnansweredQuestionIds","showAnswer","setShowAnswer","refs","reduce","acc","id","answerRef","console","log","fetchData","response","fetch","json","err","_quiz$content","unansweredIds","content","map","_ref","length","current","scrollIntoView","behavior","highestId","Math","min","className","children","title","subtitle","banner","bannerimg","fileName","_jsxFileName","lineNumber","columnNumber","contentItem","quizItem","ref","answerOptions","answers","chosenAnswers","_c","$RefreshReg$"],"sources":["/Users/hugo/code/buzzfeed-clone-react/src/App.jsx"],"sourcesContent":["import {useEffect, useState, createRef } from 'react'\nimport Title from './components/Title'\nimport QuestionsBlock from './components/QuestionsBlock'\nimport AnswerBlock from \"./components/AnswerBlock\"\n\nconst App = () => {\n    const [quiz, setQuiz] = useState(null)\n    const [chosenAnswerItems, setChosenAnswerItems] = useState([]) // useState([null]*4)\n    const [unansweredQuestionIds, setUnansweredQuestionIds] = useState(null)\n    const [showAnswer, setShowAnswer] = useState(false)\n\n    const refs = unansweredQuestionIds?.reduce((acc, id) => {\n        acc[id] = createRef()\n        return acc\n    }, {})\n\n    const answerRef = createRef()\n\n    console.log(refs)\n\n    const fetchData = async () => {\n        try {\n            const response = await fetch('http://localhost:8000/quiz')\n            const json = await response.json()\n            setQuiz(json)\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    useEffect(() => {\n        fetchData()\n    }, [])\n\n    useEffect(() => {\n        const unansweredIds = quiz?.content?.map(({id}) => id)\n        setUnansweredQuestionIds(unansweredIds)\n    }, [quiz])\n\n    useEffect(() => {\n        if (chosenAnswerItems.length > 0) { //chosenAnswerItems.length - chosenAnswerItems.filter(Number).length\n            if (showAnswer) {\n                // scroll to answer block\n                answerRef.current.scrollIntoView({behavior: 'smooth'})\n            }\n            if (unansweredQuestionIds.length <= 0 && chosenAnswerItems.length >= 1) { // \n                setShowAnswer(true)\n            } else {\n                // scroll to highest unansweredQuestionId\n                const highestId = Math.min(...unansweredQuestionIds)\n                refs[highestId].current.scrollIntoView({behavior: 'smooth'})\n            }\n        }\n    }, [unansweredQuestionIds, showAnswer, chosenAnswerItems, answerRef, refs])\n\n    return (\n        <div className=\"app\">\n            <Title title={quiz?.title} subtitle={quiz?.subtitle} banner = {quiz?.bannerimg}/>\n            {refs && quiz?.content?.map(contentItem => (\n                <QuestionsBlock\n                    key={contentItem.id}\n                    quizItem={contentItem}\n                    setChosenAnswerItems={setChosenAnswerItems}\n                    chosenAnswerItems={chosenAnswerItems}\n                    unansweredQuestionIds={unansweredQuestionIds}\n                    setUnansweredQuestionIds={setUnansweredQuestionIds}\n                    ref={refs[contentItem.id]}\n                />\n            ))}\n            {showAnswer && (\n                <AnswerBlock\n                    answerOptions={quiz?.answers}\n                    chosenAnswers={chosenAnswerItems}\n                    ref={answerRef}\n                />\n            )}\n        </div>\n    )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}