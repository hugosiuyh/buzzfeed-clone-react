{"ast":null,"code":"var _jsxFileName = \"/Users/hugo/code/buzzfeed-clone-react/src/App.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, createRef } from 'react';\nimport Title from './components/Title';\nimport QuestionsBlock from './components/QuestionsBlock';\nimport AnswerBlock from \"./components/AnswerBlock\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  var _quiz$content2;\n  const [quiz, setQuiz] = useState(null);\n  const [chosenAnswerItems, setChosenAnswerItems] = useState(new Array(4).fill(null));\n  const [unansweredQuestionIds, setUnansweredQuestionIds] = useState(null);\n  const [showAnswer, setShowAnswer] = useState(false);\n  const refs = unansweredQuestionIds === null || unansweredQuestionIds === void 0 ? void 0 : unansweredQuestionIds.reduce((acc, id) => {\n    acc[id] = /*#__PURE__*/createRef();\n    return acc;\n  }, {});\n  const answerRef = /*#__PURE__*/createRef();\n  console.log(refs, 'ref');\n  console.log(chosenAnswerItems, 'answer');\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/quiz');\n      const json = await response.json();\n      setQuiz(json);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    var _quiz$content;\n    const unansweredIds = quiz === null || quiz === void 0 ? void 0 : (_quiz$content = quiz.content) === null || _quiz$content === void 0 ? void 0 : _quiz$content.map(_ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    });\n    setUnansweredQuestionIds(unansweredIds);\n  }, [quiz]);\n  useEffect(() => {\n    if (chosenAnswerItems.some(item => item !== null)) {\n      if (showAnswer) {\n        // scroll to answer block\n        answerRef.current.scrollIntoView({\n          behavior: 'smooth'\n        });\n      }\n      if (unansweredQuestionIds.length <= 0 && chosenAnswerItems.some(item => item !== null)) {\n        // \n        setShowAnswer(true);\n      } else {\n        // scroll to highest unansweredQuestionId\n        const highestId = Math.min(...unansweredQuestionIds);\n        refs[highestId].current.scrollIntoView({\n          behavior: 'smooth'\n        });\n      }\n    }\n  }, [unansweredQuestionIds, showAnswer, chosenAnswerItems, answerRef, refs]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      title: quiz === null || quiz === void 0 ? void 0 : quiz.title,\n      subtitle: quiz === null || quiz === void 0 ? void 0 : quiz.subtitle,\n      banner: quiz === null || quiz === void 0 ? void 0 : quiz.bannerimg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), refs && (quiz === null || quiz === void 0 ? void 0 : (_quiz$content2 = quiz.content) === null || _quiz$content2 === void 0 ? void 0 : _quiz$content2.map(contentItem => /*#__PURE__*/_jsxDEV(QuestionsBlock, {\n      quizItem: contentItem,\n      setChosenAnswerItems: setChosenAnswerItems,\n      chosenAnswerItems: chosenAnswerItems,\n      unansweredQuestionIds: unansweredQuestionIds,\n      setUnansweredQuestionIds: setUnansweredQuestionIds,\n      ref: refs[contentItem.id]\n    }, contentItem.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this))), showAnswer && /*#__PURE__*/_jsxDEV(AnswerBlock, {\n      answerOptions: quiz === null || quiz === void 0 ? void 0 : quiz.content,\n      chosenAnswers: chosenAnswerItems,\n      nicki: quiz === null || quiz === void 0 ? void 0 : quiz.answers,\n      ref: answerRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n_s(App, \"e05Rw5XKGx0+RgfSvETYPsgYx8o=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","createRef","Title","QuestionsBlock","AnswerBlock","jsxDEV","_jsxDEV","App","_s","_quiz$content2","quiz","setQuiz","chosenAnswerItems","setChosenAnswerItems","Array","fill","unansweredQuestionIds","setUnansweredQuestionIds","showAnswer","setShowAnswer","refs","reduce","acc","id","answerRef","console","log","fetchData","response","fetch","json","err","_quiz$content","unansweredIds","content","map","_ref","some","item","current","scrollIntoView","behavior","length","highestId","Math","min","className","children","title","subtitle","banner","bannerimg","fileName","_jsxFileName","lineNumber","columnNumber","contentItem","quizItem","ref","answerOptions","chosenAnswers","nicki","answers","_c","$RefreshReg$"],"sources":["/Users/hugo/code/buzzfeed-clone-react/src/App.jsx"],"sourcesContent":["import {useEffect, useState, createRef } from 'react'\nimport Title from './components/Title'\nimport QuestionsBlock from './components/QuestionsBlock'\nimport AnswerBlock from \"./components/AnswerBlock\"\n\nconst App = () => {\n    const [quiz, setQuiz] = useState(null)\n    const [chosenAnswerItems, setChosenAnswerItems] = useState(new Array(4).fill(null))\n    const [unansweredQuestionIds, setUnansweredQuestionIds] = useState(null)\n    const [showAnswer, setShowAnswer] = useState(false)\n\n    const refs = unansweredQuestionIds?.reduce((acc, id) => {\n        acc[id] = createRef()\n        return acc\n    }, {})\n\n    const answerRef = createRef()\n\n    console.log(refs,'ref')\n    console.log(chosenAnswerItems,'answer')\n\n    const fetchData = async () => {\n        try {\n            const response = await fetch('http://localhost:8000/quiz')\n            const json = await response.json()\n            setQuiz(json)\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    useEffect(() => {\n        fetchData()\n    }, [])\n\n    useEffect(() => {\n        const unansweredIds = quiz?.content?.map(({id}) => id)\n        setUnansweredQuestionIds(unansweredIds)\n    }, [quiz])\n\n    useEffect(() => {\n        if (chosenAnswerItems.some((item => item !== null))){\n            if (showAnswer) {\n                // scroll to answer block\n                answerRef.current.scrollIntoView({behavior: 'smooth'})\n            }\n            if (unansweredQuestionIds.length <= 0 && chosenAnswerItems.some((item => item !== null))) { // \n                setShowAnswer(true)\n            } else {\n                // scroll to highest unansweredQuestionId\n                const highestId = Math.min(...unansweredQuestionIds)\n                refs[highestId].current.scrollIntoView({behavior: 'smooth'})\n            }\n        }\n    }, [unansweredQuestionIds, showAnswer, chosenAnswerItems, answerRef, refs])\n\n    return (\n        <div className=\"app\">\n            <Title title={quiz?.title} subtitle={quiz?.subtitle} banner = {quiz?.bannerimg}/>\n            {refs && quiz?.content?.map(contentItem => (\n                <QuestionsBlock\n                    key={contentItem.id}\n                    quizItem={contentItem}\n                    setChosenAnswerItems={setChosenAnswerItems}\n                    chosenAnswerItems={chosenAnswerItems}\n                    unansweredQuestionIds={unansweredQuestionIds}\n                    setUnansweredQuestionIds={setUnansweredQuestionIds}\n                    ref={refs[contentItem.id]}\n                />\n            ))}\n            {showAnswer && (\n                <AnswerBlock\n                    answerOptions={quiz?.content}\n                    chosenAnswers={chosenAnswerItems}\n                    nicki = {quiz?.answers}\n                    ref={answerRef}\n                />\n            )}\n        </div>\n    )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}