{"ast":null,"code":"import _toConsumableArray from\"/Users/hugo/code/buzzfeed-clone-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/hugo/code/buzzfeed-clone-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hugo/code/buzzfeed-clone-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hugo/code/buzzfeed-clone-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,createRef}from'react';import Title from'./components/Title';import QuestionsBlock from'./components/QuestionsBlock';import AnswerBlock from\"./components/AnswerBlock\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _quiz$content2;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),quiz=_useState2[0],setQuiz=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chosenAnswerItems=_useState4[0],setChosenAnswerItems=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),unansweredQuestionIds=_useState6[0],setUnansweredQuestionIds=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showAnswer=_useState8[0],setShowAnswer=_useState8[1];var refs=unansweredQuestionIds===null||unansweredQuestionIds===void 0?void 0:unansweredQuestionIds.reduce(function(acc,id){acc[id]=/*#__PURE__*/createRef();return acc;},{});var answerRef=/*#__PURE__*/createRef();console.log(refs);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:8000/quiz');case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;setQuiz(json);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);useEffect(function(){var _quiz$content;var unansweredIds=quiz===null||quiz===void 0?void 0:(_quiz$content=quiz.content)===null||_quiz$content===void 0?void 0:_quiz$content.map(function(_ref2){var id=_ref2.id;return id;});setUnansweredQuestionIds(unansweredIds);},[quiz]);useEffect(function(){if(chosenAnswerItems.length>0){if(showAnswer){// scroll to answer block\nanswerRef.current.scrollIntoView({behavior:'smooth'});}if(unansweredQuestionIds.length<=0&&chosenAnswerItems.length>=1){setShowAnswer(true);}else{// scroll to highest unansweredQuestionId\nvar highestId=Math.min.apply(Math,_toConsumableArray(unansweredQuestionIds));refs[highestId].current.scrollIntoView({behavior:'smooth'});}}},[unansweredQuestionIds,showAnswer,chosenAnswerItems,answerRef,refs]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Title,{title:quiz===null||quiz===void 0?void 0:quiz.title,subtitle:quiz===null||quiz===void 0?void 0:quiz.subtitle,banner:quiz===null||quiz===void 0?void 0:quiz.bannerimg}),refs&&(quiz===null||quiz===void 0?void 0:(_quiz$content2=quiz.content)===null||_quiz$content2===void 0?void 0:_quiz$content2.map(function(contentItem){return/*#__PURE__*/_jsx(QuestionsBlock,{quizItem:contentItem,setChosenAnswerItems:setChosenAnswerItems,chosenAnswerItems:chosenAnswerItems,unansweredQuestionIds:unansweredQuestionIds,setUnansweredQuestionIds:setUnansweredQuestionIds,ref:refs[contentItem.id]},contentItem.id);})),showAnswer&&/*#__PURE__*/_jsx(AnswerBlock,{answerOptions:quiz===null||quiz===void 0?void 0:quiz.answers,chosenAnswers:chosenAnswerItems,ref:answerRef})]});};export default App;","map":{"version":3,"names":["useEffect","useState","createRef","Title","QuestionsBlock","AnswerBlock","jsx","_jsx","jsxs","_jsxs","App","_quiz$content2","_useState","_useState2","_slicedToArray","quiz","setQuiz","_useState3","_useState4","chosenAnswerItems","setChosenAnswerItems","_useState5","_useState6","unansweredQuestionIds","setUnansweredQuestionIds","_useState7","_useState8","showAnswer","setShowAnswer","refs","reduce","acc","id","answerRef","console","log","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","json","wrap","_callee$","_context","prev","next","fetch","sent","t0","stop","apply","arguments","_quiz$content","unansweredIds","content","map","_ref2","length","current","scrollIntoView","behavior","highestId","Math","min","_toConsumableArray","className","children","title","subtitle","banner","bannerimg","contentItem","quizItem","ref","answerOptions","answers","chosenAnswers"],"sources":["/Users/hugo/code/buzzfeed-clone-react/src/App.jsx"],"sourcesContent":["import {useEffect, useState, createRef } from 'react'\nimport Title from './components/Title'\nimport QuestionsBlock from './components/QuestionsBlock'\nimport AnswerBlock from \"./components/AnswerBlock\"\n\nconst App = () => {\n    const [quiz, setQuiz] = useState(null)\n    const [chosenAnswerItems, setChosenAnswerItems] = useState([])\n    const [unansweredQuestionIds, setUnansweredQuestionIds] = useState(null)\n    const [showAnswer, setShowAnswer] = useState(false)\n\n    const refs = unansweredQuestionIds?.reduce((acc, id) => {\n        acc[id] = createRef()\n        return acc\n    }, {})\n\n    const answerRef = createRef()\n\n    console.log(refs)\n\n    const fetchData = async () => {\n        try {\n            const response = await fetch('http://localhost:8000/quiz')\n            const json = await response.json()\n            setQuiz(json)\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    useEffect(() => {\n        fetchData()\n    }, [])\n\n    useEffect(() => {\n        const unansweredIds = quiz?.content?.map(({id}) => id)\n        setUnansweredQuestionIds(unansweredIds)\n    }, [quiz])\n\n    useEffect(() => {\n        if (chosenAnswerItems.length > 0) {\n            if (showAnswer) {\n                // scroll to answer block\n                answerRef.current.scrollIntoView({behavior: 'smooth'})\n            }\n            if (unansweredQuestionIds.length <= 0 && chosenAnswerItems.length >= 1) {\n                setShowAnswer(true)\n            } else {\n                // scroll to highest unansweredQuestionId\n                const highestId = Math.min(...unansweredQuestionIds)\n                refs[highestId].current.scrollIntoView({behavior: 'smooth'})\n            }\n        }\n    }, [unansweredQuestionIds, showAnswer, chosenAnswerItems, answerRef, refs])\n\n    return (\n        <div className=\"app\">\n            <Title title={quiz?.title} subtitle={quiz?.subtitle} banner = {quiz?.bannerimg}/>\n            {refs && quiz?.content?.map(contentItem => (\n                <QuestionsBlock\n                    key={contentItem.id}\n                    quizItem={contentItem}\n                    setChosenAnswerItems={setChosenAnswerItems}\n                    chosenAnswerItems={chosenAnswerItems}\n                    unansweredQuestionIds={unansweredQuestionIds}\n                    setUnansweredQuestionIds={setUnansweredQuestionIds}\n                    ref={refs[contentItem.id]}\n                />\n            ))}\n            {showAnswer && (\n                <AnswerBlock\n                    answerOptions={quiz?.answers}\n                    chosenAnswers={chosenAnswerItems}\n                    ref={answerRef}\n                />\n            )}\n        </div>\n    )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}