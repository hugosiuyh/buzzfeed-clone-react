{"ast":null,"code":"import _toConsumableArray from\"/Users/hugo/code/nicki/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/hugo/code/nicki/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hugo/code/nicki/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hugo/code/nicki/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,createRef}from'react';import Title from'./components/Title';import QuestionsBlock from'./components/QuestionsBlock';import AnswerBlock from\"./components/AnswerBlock\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _quiz$content2;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),quiz=_useState2[0],setQuiz=_useState2[1];var _useState3=useState(new Array(4).fill(null)),_useState4=_slicedToArray(_useState3,2),chosenAnswerItems=_useState4[0],setChosenAnswerItems=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),unansweredQuestionIds=_useState6[0],setUnansweredQuestionIds=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showAnswer=_useState8[0],setShowAnswer=_useState8[1];var refs=unansweredQuestionIds===null||unansweredQuestionIds===void 0?void 0:unansweredQuestionIds.reduce(function(acc,id){acc[id]=/*#__PURE__*/createRef();return acc;},{});var answerRef=/*#__PURE__*/createRef();console.log(refs,'ref');console.log(chosenAnswerItems,'answer');var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:8000/quiz');case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;setQuiz(json);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);useEffect(function(){var _quiz$content;var unansweredIds=quiz===null||quiz===void 0?void 0:(_quiz$content=quiz.content)===null||_quiz$content===void 0?void 0:_quiz$content.map(function(_ref2){var id=_ref2.id;return id;});setUnansweredQuestionIds(unansweredIds);},[quiz]);useEffect(function(){if(chosenAnswerItems.some(function(item){return item!==null;})){if(showAnswer){// scroll to answer block\nanswerRef.current.scrollIntoView({behavior:'smooth'});}if(unansweredQuestionIds.length<=0&&chosenAnswerItems.some(function(item){return item!==null;})){// \nsetShowAnswer(true);}else{// scroll to highest unansweredQuestionId\nvar highestId=Math.min.apply(Math,_toConsumableArray(unansweredQuestionIds));refs[highestId].current.scrollIntoView({behavior:'smooth'});}}},[unansweredQuestionIds,showAnswer,chosenAnswerItems,answerRef,refs]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Title,{title:quiz===null||quiz===void 0?void 0:quiz.title,subtitle:quiz===null||quiz===void 0?void 0:quiz.subtitle,banner:quiz===null||quiz===void 0?void 0:quiz.bannerimg}),refs&&(quiz===null||quiz===void 0?void 0:(_quiz$content2=quiz.content)===null||_quiz$content2===void 0?void 0:_quiz$content2.map(function(contentItem){return/*#__PURE__*/_jsx(QuestionsBlock,{quizItem:contentItem,setChosenAnswerItems:setChosenAnswerItems,chosenAnswerItems:chosenAnswerItems,unansweredQuestionIds:unansweredQuestionIds,setUnansweredQuestionIds:setUnansweredQuestionIds,ref:refs[contentItem.id]},contentItem.id);})),showAnswer&&/*#__PURE__*/_jsx(AnswerBlock,{answerOptions:quiz===null||quiz===void 0?void 0:quiz.content,chosenAnswers:chosenAnswerItems,nicki:quiz===null||quiz===void 0?void 0:quiz.answers,ref:answerRef}),/*#__PURE__*/_jsx(\"p\",{children:\" made with love: D&H\"})]});};export default App;","map":{"version":3,"names":["useEffect","useState","createRef","Title","QuestionsBlock","AnswerBlock","jsx","_jsx","jsxs","_jsxs","App","_quiz$content2","_useState","_useState2","_slicedToArray","quiz","setQuiz","_useState3","Array","fill","_useState4","chosenAnswerItems","setChosenAnswerItems","_useState5","_useState6","unansweredQuestionIds","setUnansweredQuestionIds","_useState7","_useState8","showAnswer","setShowAnswer","refs","reduce","acc","id","answerRef","console","log","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","json","wrap","_callee$","_context","prev","next","fetch","sent","t0","stop","apply","arguments","_quiz$content","unansweredIds","content","map","_ref2","some","item","current","scrollIntoView","behavior","length","highestId","Math","min","_toConsumableArray","className","children","title","subtitle","banner","bannerimg","contentItem","quizItem","ref","answerOptions","chosenAnswers","nicki","answers"],"sources":["/Users/hugo/code/nicki/src/App.jsx"],"sourcesContent":["import {useEffect, useState, createRef } from 'react'\nimport Title from './components/Title'\nimport QuestionsBlock from './components/QuestionsBlock'\nimport AnswerBlock from \"./components/AnswerBlock\"\n\nconst App = () => {\n    const [quiz, setQuiz] = useState(null)\n    const [chosenAnswerItems, setChosenAnswerItems] = useState(new Array(4).fill(null))\n    const [unansweredQuestionIds, setUnansweredQuestionIds] = useState(null)\n    const [showAnswer, setShowAnswer] = useState(false)\n\n    const refs = unansweredQuestionIds?.reduce((acc, id) => {\n        acc[id] = createRef()\n        return acc\n    }, {})\n\n    const answerRef = createRef()\n\n    console.log(refs,'ref')\n    console.log(chosenAnswerItems,'answer')\n\n    const fetchData = async () => {\n        try {\n            const response = await fetch('http://localhost:8000/quiz')\n            const json = await response.json()\n            setQuiz(json)\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    useEffect(() => {\n        fetchData()\n    }, [])\n\n    useEffect(() => {\n        const unansweredIds = quiz?.content?.map(({id}) => id)\n        setUnansweredQuestionIds(unansweredIds)\n    }, [quiz])\n\n    useEffect(() => {\n        if (chosenAnswerItems.some((item => item !== null))){\n            if (showAnswer) {\n                // scroll to answer block\n                answerRef.current.scrollIntoView({behavior: 'smooth'})\n            }\n            if (unansweredQuestionIds.length <= 0 && chosenAnswerItems.some((item => item !== null))) { // \n                setShowAnswer(true)\n            } else {\n                // scroll to highest unansweredQuestionId\n                const highestId = Math.min(...unansweredQuestionIds)\n                refs[highestId].current.scrollIntoView({behavior: 'smooth'})\n            }\n        }\n    }, [unansweredQuestionIds, showAnswer, chosenAnswerItems, answerRef, refs])\n\n    return (\n        <div className=\"app\">\n            <Title title={quiz?.title} subtitle={quiz?.subtitle} banner = {quiz?.bannerimg}/>\n            {refs && quiz?.content?.map(contentItem => (\n                <QuestionsBlock\n                    key={contentItem.id}\n                    quizItem={contentItem}\n                    setChosenAnswerItems={setChosenAnswerItems}\n                    chosenAnswerItems={chosenAnswerItems}\n                    unansweredQuestionIds={unansweredQuestionIds}\n                    setUnansweredQuestionIds={setUnansweredQuestionIds}\n                    ref={refs[contentItem.id]}\n                />\n            ))}\n            {showAnswer && (\n                <AnswerBlock\n                    answerOptions={quiz?.content}\n                    chosenAnswers={chosenAnswerItems}\n                    nicki = {quiz?.answers}\n                    ref={answerRef}\n                />\n            )}\n            <p> made with love: D&H</p>\n        </div>\n    )\n}\n\nexport default App\n"],"mappings":"wcAAA,OAAQA,SAAS,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACrD,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CACtC,MAAO,CAAAC,cAAc,KAAM,6BAA6B,CACxD,MAAO,CAAAC,WAAW,KAAM,0BAA0B,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElD,GAAM,CAAAC,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAA,CAAS,KAAAC,cAAA,CACd,IAAAC,SAAA,CAAwBX,QAAQ,CAAC,IAAI,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAAkDhB,QAAQ,CAAC,GAAI,CAAAiB,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAAC,UAAA,CAAAN,cAAA,CAAAG,UAAA,IAA5EI,iBAAiB,CAAAD,UAAA,IAAEE,oBAAoB,CAAAF,UAAA,IAC9C,IAAAG,UAAA,CAA0DtB,QAAQ,CAAC,IAAI,CAAC,CAAAuB,UAAA,CAAAV,cAAA,CAAAS,UAAA,IAAjEE,qBAAqB,CAAAD,UAAA,IAAEE,wBAAwB,CAAAF,UAAA,IACtD,IAAAG,UAAA,CAAoC1B,QAAQ,CAAC,KAAK,CAAC,CAAA2B,UAAA,CAAAd,cAAA,CAAAa,UAAA,IAA5CE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAEhC,GAAM,CAAAG,IAAI,CAAGN,qBAAqB,SAArBA,qBAAqB,iBAArBA,qBAAqB,CAAEO,MAAM,CAAC,SAACC,GAAG,CAAEC,EAAE,CAAK,CACpDD,GAAG,CAACC,EAAE,CAAC,cAAGhC,SAAS,CAAC,CAAC,CACrB,MAAO,CAAA+B,GAAG,CACd,CAAC,CAAE,CAAC,CAAC,CAAC,CAEN,GAAM,CAAAE,SAAS,cAAGjC,SAAS,CAAC,CAAC,CAE7BkC,OAAO,CAACC,GAAG,CAACN,IAAI,CAAC,KAAK,CAAC,CACvBK,OAAO,CAACC,GAAG,CAAChB,iBAAiB,CAAC,QAAQ,CAAC,CAEvC,GAAM,CAAAiB,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEa,CAAAC,KAAK,CAAC,4BAA4B,CAAC,QAApDP,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SACK,CAAAN,QAAQ,CAACC,IAAI,CAAC,CAAC,QAA5BA,IAAI,CAAAG,QAAA,CAAAI,IAAA,CACVpC,OAAO,CAAC6B,IAAI,CAAC,CAAAG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAK,EAAA,CAAAL,QAAA,aAEbZ,OAAO,CAACC,GAAG,CAAAW,QAAA,CAAAK,EAAI,CAAC,0BAAAL,QAAA,CAAAM,IAAA,MAAAX,OAAA,iBAEvB,kBARK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAgB,KAAA,MAAAC,SAAA,OAQd,CAEDxD,SAAS,CAAC,UAAM,CACZsC,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAENtC,SAAS,CAAC,UAAM,KAAAyD,aAAA,CACZ,GAAM,CAAAC,aAAa,CAAG3C,IAAI,SAAJA,IAAI,kBAAA0C,aAAA,CAAJ1C,IAAI,CAAE4C,OAAO,UAAAF,aAAA,iBAAbA,aAAA,CAAeG,GAAG,CAAC,SAAAC,KAAA,KAAE,CAAA3B,EAAE,CAAA2B,KAAA,CAAF3B,EAAE,OAAM,CAAAA,EAAE,GAAC,CACtDR,wBAAwB,CAACgC,aAAa,CAAC,CAC3C,CAAC,CAAE,CAAC3C,IAAI,CAAC,CAAC,CAEVf,SAAS,CAAC,UAAM,CACZ,GAAIqB,iBAAiB,CAACyC,IAAI,CAAE,SAAAC,IAAI,QAAI,CAAAA,IAAI,GAAK,IAAI,EAAC,CAAC,CAAC,CAChD,GAAIlC,UAAU,CAAE,CACZ;AACAM,SAAS,CAAC6B,OAAO,CAACC,cAAc,CAAC,CAACC,QAAQ,CAAE,QAAQ,CAAC,CAAC,CAC1D,CACA,GAAIzC,qBAAqB,CAAC0C,MAAM,EAAI,CAAC,EAAI9C,iBAAiB,CAACyC,IAAI,CAAE,SAAAC,IAAI,QAAI,CAAAA,IAAI,GAAK,IAAI,EAAC,CAAC,CAAE,CAAE;AACxFjC,aAAa,CAAC,IAAI,CAAC,CACvB,CAAC,IAAM,CACH;AACA,GAAM,CAAAsC,SAAS,CAAGC,IAAI,CAACC,GAAG,CAAAf,KAAA,CAARc,IAAI,CAAAE,kBAAA,CAAQ9C,qBAAqB,EAAC,CACpDM,IAAI,CAACqC,SAAS,CAAC,CAACJ,OAAO,CAACC,cAAc,CAAC,CAACC,QAAQ,CAAE,QAAQ,CAAC,CAAC,CAChE,CACJ,CACJ,CAAC,CAAE,CAACzC,qBAAqB,CAAEI,UAAU,CAAER,iBAAiB,CAAEc,SAAS,CAAEJ,IAAI,CAAC,CAAC,CAE3E,mBACItB,KAAA,QAAK+D,SAAS,CAAC,KAAK,CAAAC,QAAA,eAChBlE,IAAA,CAACJ,KAAK,EAACuE,KAAK,CAAE3D,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE2D,KAAM,CAACC,QAAQ,CAAE5D,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4D,QAAS,CAACC,MAAM,CAAI7D,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE8D,SAAU,CAAC,CAAC,CAChF9C,IAAI,GAAIhB,IAAI,SAAJA,IAAI,kBAAAJ,cAAA,CAAJI,IAAI,CAAE4C,OAAO,UAAAhD,cAAA,iBAAbA,cAAA,CAAeiD,GAAG,CAAC,SAAAkB,WAAW,qBACnCvE,IAAA,CAACH,cAAc,EAEX2E,QAAQ,CAAED,WAAY,CACtBxD,oBAAoB,CAAEA,oBAAqB,CAC3CD,iBAAiB,CAAEA,iBAAkB,CACrCI,qBAAqB,CAAEA,qBAAsB,CAC7CC,wBAAwB,CAAEA,wBAAyB,CACnDsD,GAAG,CAAEjD,IAAI,CAAC+C,WAAW,CAAC5C,EAAE,CAAE,EANrB4C,WAAW,CAAC5C,EAOpB,CAAC,EACL,CAAC,EACDL,UAAU,eACPtB,IAAA,CAACF,WAAW,EACR4E,aAAa,CAAElE,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4C,OAAQ,CAC7BuB,aAAa,CAAE7D,iBAAkB,CACjC8D,KAAK,CAAIpE,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEqE,OAAQ,CACvBJ,GAAG,CAAE7C,SAAU,CAClB,CACJ,cACD5B,IAAA,MAAAkE,QAAA,CAAG,sBAAoB,CAAG,CAAC,EAC1B,CAAC,CAEd,CAAC,CAED,cAAe,CAAA/D,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}